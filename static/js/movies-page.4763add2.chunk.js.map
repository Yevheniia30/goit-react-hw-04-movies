{"version":3,"sources":["views/MoviesView/MoviesView.jsx","services/movies-api.js","Components/MoviesList/MoviesList.jsx","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","views/MoviesView/MoviesView.module.css"],"names":["MoviesView","state","movies","query","isLoading","error","handleChange","e","setState","currentTarget","value","handleSearchMovie","preventDefault","props","location","history","moviesApi","fetchByKeyWord","then","push","pathname","search","catch","finally","this","onSubmit","type","autoComplete","autoFocus","placeholder","onChange","className","s","search_input","search_btn","color","height","width","timeout","Component","axios","defaults","baseURL","API_KEY","fetchMovies","get","data","results","fetchMovieDetals","movieId","fetchGenres","genres","fetchReviews","fetchCast","res","withRouter","list","map","id","original_title","original_name","to","from","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","module","exports"],"mappings":"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","file":"static/js/movies-page.4763add2.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport Loader from 'react-loader-spinner';\n// import NotFoundView from '../../views/NotFoundView';\nimport MoviesList from '../../Components/MoviesList';\nimport moviesApi from '../../services/movies-api';\nimport s from './MoviesView.module.css';\n\nclass MoviesView extends Component {\n  state = {\n    movies: [],\n    query: '',\n    isLoading: false,\n    error: null,\n  };\n\n\n  \n  // поиск по ключевому слову\n  handleChange = e => {\n    this.setState({\n      query: e.currentTarget.value,\n    });\n  };\n\n  handleSearchMovie = e => {\n    e.preventDefault();\n\n    const { query } = this.state;\n    const {location, history} =this.props\n    this.setState({ isLoading: true });\n    moviesApi\n      .fetchByKeyWord({ query })\n      .then(movies => {\n        this.setState({\n          movies: [...movies],\n        });\n        history.push({\n          ...location,\n          pathname: location.pathname,\n          search: `?query=${query}`,\n        });\n        // console.log(movies);\n      })\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n\n    this.setState({ query: '' });\n  };\n\n  render() {\n    const { query, movies, isLoading, error } = this.state;\n    return (\n      <div>\n        <h1>MoviesPage</h1>\n        <form onSubmit={this.handleSearchMovie}>\n          <input\n            type=\"text\"\n            value={query}\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleChange}\n            className={s.search_input}\n          />\n          <button type=\"submit\" className={s.search_btn}>\n            Search\n          </button>\n        </form>\n        {isLoading && (\n          <Loader\n            type=\"Puff\"\n            color=\"#00BFFF\"\n            height={100}\n            width={100}\n            timeout={3000} //3 secs\n          />\n        )}\n\n        {error ? (\n          <p>Nothing was found. Please enter more specific value</p>\n        ) : (\n          <MoviesList movies={movies} />\n        )}\n      </div>\n    );\n  }\n}\n\nexport default MoviesView;\n","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://api.themoviedb.org';\nconst API_KEY = 'c4360f2fc66490777a6befee451fce21';\n\n// тренды\nconst fetchMovies = () => {\n  return axios\n    .get(`/3/trending/movie/day?api_key=${API_KEY}`)\n    .then(({ data }) => data.results);\n};\n\n// по ключевому слову\nconst fetchByKeyWord = ({ query }) => {\n  return axios\n    .get(\n      `/3/search/movie?query=${query}&api_key=${API_KEY}&language=en-US&page=1&include_adult=false`,\n    )\n    .then(({ data }) => data.results);\n};\n\n// инфо о фильме\nconst fetchMovieDetals = ({ movieId }) => {\n  return axios\n    .get(`/3/movie/${movieId}?api_key=${API_KEY}&language=en-US`)\n    .then(({ data }) => data);\n};\n\n// жанры\nconst fetchGenres = () => {\n  return axios\n    .get(`/3/genre/movie/list?api_key=${API_KEY}&language=en-US`)\n    .then(({ data }) => data.genres);\n};\n\n// обзоры\nconst fetchReviews = ({ movieId }) => {\n  return axios\n    .get(`/3/movie/${movieId}/reviews?api_key=${API_KEY}&language=en-US&page=1`)\n    .then(({ data }) => data.results);\n};\n\n// актеры\nconst fetchCast = ({ movieId }) => {\n  return axios\n    .get(`/3/movie/${movieId}/credits?api_key=${API_KEY}&language=en-US`)\n    .then(res => res.data);\n};\n\nexport default {\n  fetchMovies,\n  fetchByKeyWord,\n  fetchMovieDetals,\n  fetchGenres,\n  fetchReviews,\n  fetchCast,\n};\n","import { Link, withRouter } from 'react-router-dom';\n\nimport s from './MoviesList.module.css';\n\nconst MoviesList = ({ movies, location }) => {\n  return (\n    <ul className={s.list}>\n      {movies.map(({ id, original_title, original_name }) => (\n        <li key={id}>\n          <Link\n            to={{\n              pathname: `/movies/${id}`,\n              state: {\n                from: location,\n              },\n            }}\n          >\n            {original_title || original_name}{' '}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nexport default withRouter(MoviesList);\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"search_input\":\"MoviesView_search_input__1pDyg\",\"search_btn\":\"MoviesView_search_btn__3cDFg\"};"],"sourceRoot":""}